<ion-view title="{{isMine ? 'lbl_mytrip': 'lbl_trip'| translate}}">
    <ion-content>
        <div ng-if="!isMine">
            <div>
                MAPPA
            </div>
            <a class="button button-full" ng-if="!isMine">
                <i class="icons ion-person"></i>
                <span>{{driverInfo.name + ' ' + driverInfo.surname}}</span>
            </a>
            <!-- hide temporary
            <a class="button">
                <i class="icons ion-ios-people"></i>
                <span>{{selectedTrip.communityIds[0]}}</span>
            </a>
            -->
        </div>

        <div class="padding trip-info">
            <p>
                <span>{{selectedTrip.when | date:travelDateFormat}}</span>
            </p>

            <ul>
                <li>
                    {{'lbl_from' | translate | uppercase}}: <span>{{selectedTrip.from.name}}</span>
                </li>
                <li>
                    {{'lbl_to' | translate | uppercase}}: <span>{{selectedTrip.to.name}}</span>
                </li>
            </ul>

            <ul class="padding-top padding-bottom">
                <li>
                    {{'lbl_start_time' | translate}}: <span>{{selectedTrip.route.startime | date:travelTimeFormat}}</span>
                </li>
                <li>
                    {{'lbl_end_time' | translate}}: <span>{{selectedTrip.route.endtime | date:travelTimeFormat}}</span>
                </li>
            </ul>

            <p>
                {{'lbl_halfwaystops' | translate}}: <span>{{(!!selectedTrip.intermediateStops ? 'lbl_halfwaystops_onrequest' : 'lbl_halfwaystops_none') | translate}}</span>
            </p>

            <p ng-if="isRecurrencyEnabled()">
                {{'lbl_recurrency' | translate}}: <span>{{!!selectedTrip.recurrency ? dowString : 'lbl_recurrency_none' | translate}}</span>
            </p>
        </div>

        <div class="padding trip-passengers">
            <h5>{{'lbl_passenger' | translate | uppercase}}</h5>
            <ul>
                <li class="trip-places-booked" ng-repeat="i in getNumber(bookingCounters.booked) track by $index">
                    <i class="icons ion-person"></i>
                </li>
                <li class="trip-places-left">
                    <span>+{{bookingCounters.available}}</span>
                    <div>{{'lbl_spaces_left' | translate | uppercase}}</div>
                </li>
            </ul>
        </div>

        <div class="padding trip-status" ng-if="!isMine && bookingState !== null">
            <span ng-if="bookingState === -1">{{'lbl_trip_rejected' | translate}}</span>
            <span ng-if="bookingState === 0">{{'lbl_trip_requested' | translate}}</span>
            <span ng-if="bookingState === 1">{{'lbl_trip_accepted' | translate}}</span>
        </div>

        <div class="padding row trip-actions" ng-if="!isMine">
            <div class="col">
                <button class="button button-carpooling">
                    {{'lbl_driver_contact' | translate | uppercase}}
                </button>
            </div>
            <div class="col">
                <button class="button button-carpooling" ng-click="bookingAction()">
                    <span ng-if="bookingState === null">{{'lbl_trip_ask' | translate | uppercase}}</span>
                    <span ng-if="bookingState === -1">{{'lbl_trip_rejected' | translate | uppercase}}</span>
                    <span ng-if="bookingState === 0">{{'lbl_trip_requested' | translate | uppercase}}</span>
                    <span ng-if="bookingState === 1">{{'lbl_trip_accepted' | translate | uppercase}}</span>
                </button>
            </div>
        </div>

        <div class="padding trip-requests" ng-if="isMine">
            <h5>{{'lbl_requests' | translate}}</h5>
            <ul>
                <!--<li ng-repeat="booking in $scope.selectedTrip.bookings">-->
                <li>
                    <div class="row">
                        <div class="col">
                            <i class="icons ion-person"></i>
                        </div>
                        <div class="col">
                            <!--{{booking.traveller.userId}} {{booking.traveller.name}} {{booking.traveller.surname}}-->
                            <p>Oscar Zambotti</p>
                            <p><a>Vedi profilo</a></p>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </ion-content>
</ion-view>
